<UserControl x:Class="VetaleBrowserWPF.Controls.TabControl"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             Height="38" 
             MinWidth="100" 
             MaxWidth="240">
    
    <UserControl.Resources>
        <!-- Active Tab Gradient -->
        <LinearGradientBrush x:Key="ActiveTabGradient" StartPoint="0,0" EndPoint="0,1">
            <GradientStop Color="#DDD6FE" Offset="0" />
            <GradientStop Color="#C4B5FD" Offset="1" />
        </LinearGradientBrush>

        <!-- Inactive Tab Gradient -->
        <LinearGradientBrush x:Key="InactiveTabGradient" StartPoint="0,0" EndPoint="0,1">
            <GradientStop Color="#F3F4F6" Offset="0" />
            <GradientStop Color="#E5E7EB" Offset="1" />
        </LinearGradientBrush>

        <!-- Hover Tab Gradient -->
        <LinearGradientBrush x:Key="HoverTabGradient" StartPoint="0,0" EndPoint="0,1">
            <GradientStop Color="#FAF9FF" Offset="0" />
            <GradientStop Color="#F3F1FF" Offset="1" />
        </LinearGradientBrush>

        <!-- Mute Button Style -->
        <Style x:Key="MuteButtonStyle" TargetType="Button">
            <Setter Property="Width" Value="20"/>
            <Setter Property="Height" Value="20"/>
            <Setter Property="Margin" Value="0,0,6,0"/>
            <Setter Property="Background" Value="Transparent"/>
            <Setter Property="BorderThickness" Value="0"/>
            <Setter Property="Cursor" Value="Hand"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Button">
                        <Border Background="{TemplateBinding Background}" 
                                CornerRadius="4">
                            <ContentPresenter/>
                        </Border>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
            <Style.Triggers>
                <Trigger Property="IsMouseOver" Value="True">
                    <Setter Property="Background" Value="#E0E0E0"/>
                </Trigger>
                <Trigger Property="IsPressed" Value="True">
                    <Setter Property="Background" Value="#D0D0D0"/>
                </Trigger>
            </Style.Triggers>
        </Style>

        <!-- Close Button Style -->
        <Style x:Key="TabCloseButtonStyle" TargetType="Button">
            <Setter Property="Width" Value="24"/>
            <Setter Property="Height" Value="24"/>
            <Setter Property="Background" Value="Transparent"/>
            <Setter Property="BorderThickness" Value="0"/>
            <Setter Property="Cursor" Value="Hand"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Button">
                        <Border Background="{TemplateBinding Background}" 
                                CornerRadius="5">
                            <ContentPresenter/>
                        </Border>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
            <Style.Triggers>
                <Trigger Property="IsMouseOver" Value="True">
                    <Setter Property="Background" Value="#DDD6FE"/>
                </Trigger>
                <Trigger Property="IsPressed" Value="True">
                    <Setter Property="Background" Value="#C4B5FD"/>
                </Trigger>
            </Style.Triggers>
        </Style>
    </UserControl.Resources>

    <!-- Tab Border with Rounded Top Corners -->
    <Border x:Name="TabBorder"
            Background="{StaticResource InactiveTabGradient}"
            CornerRadius="8,8,0,0"
            Padding="12,0,8,0"
            Opacity="0.7">
        <Grid>
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="Auto"/>
                <ColumnDefinition Width="Auto"/>
                <ColumnDefinition Width="*"/>
                <ColumnDefinition Width="Auto"/>
            </Grid.ColumnDefinitions>

            <!-- Mute Button (left of favicon) -->
            <Button Grid.Column="0"
                    x:Name="MuteButton"
                    Style="{StaticResource MuteButtonStyle}"
                    ToolTip="Вимкнути/Увімкнути звук">
                <Grid>
                    <!-- Speaker Icon -->
                    <Path x:Name="SpeakerIcon"
                          Data="M2,6 L6,6 L10,2 L10,18 L6,14 L2,14 Z M12,6 C13,7 13,11 12,12"
                          Fill="#666666"
                          Stretch="Uniform"
                          Width="12"
                          Height="12"
                          Margin="2"/>
                    
                    <!-- Slash when muted (hidden by default) -->
                    <Path x:Name="MuteSlash"
                          Data="M3,3 L13,15"
                          Stroke="#FFFFFF"
                          StrokeThickness="1.8"
                          Visibility="Collapsed"/>
                </Grid>
            </Button>

            <!-- Favicon/Icon -->
            <Border Grid.Column="1"
                    Width="24"
                    Height="24"
                    Margin="0,0,8,0"
                    CornerRadius="3"
                    Background="#A78BFA">
                <!-- Замініть цей Image на актуальну іконку -->
                <Image x:Name="FaviconImage"
                       Source="pack://application:,,,/Resources/Icons/DefaultTabItem.ico"
                       Width="24"
                       Height="24"
                       Stretch="Uniform"/>
            </Border>

            <!-- Title -->
            <TextBlock Grid.Column="2"
                       x:Name="TitleText"
                       Text="Назва вкладки"
                       FontSize="12"
                       FontWeight="Normal"
                       Foreground="#D84315"
                       VerticalAlignment="Center"
                       TextTrimming="CharacterEllipsis"
                       Margin="0,0,8,0"/>

            <!-- Close Button -->
            <Button Grid.Column="3"
                    x:Name="CloseButton"
                    Style="{StaticResource TabCloseButtonStyle}">
                <Image Source="pack://application:,,,/Resources/Icons/CloseTabButton.png"
                       Width="24"
                       Height="24"
                       Stretch="UniformToFill"/>
            </Button>
        </Grid>
    </Border>

    <!-- Triggers for Active/Inactive States -->
    <UserControl.Triggers>
        <!-- Active State Trigger (можна активувати через код) -->
        <!--
        <DataTrigger Binding="{Binding IsActive}" Value="True">
            <Setter TargetName="TabBorder" Property="Background" Value="{StaticResource ActiveTabGradient}"/>
            <Setter TargetName="TabBorder" Property="Opacity" Value="1"/>
            <Setter TargetName="TabBorder" Property="BorderBrush" Value="#A78BFA"/>
            <Setter TargetName="TabBorder" Property="BorderThickness" Value="1,1,1,0"/>
            <Setter TargetName="TitleText" Property="FontWeight" Value="SemiBold"/>
        </DataTrigger>
        -->
    </UserControl.Triggers>
</UserControl>

